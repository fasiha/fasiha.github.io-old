<!DOCTYPE html>
<head>
<meta charset="UTF-8">
<title>How to use the FFT to make, and take apart, sinusoidal data</title>
<link rel="stylesheet" href="/tufte.css">

<script type='text/javascript' src='/pushstream.js'></script>
<script>
var pushstream = new PushStream({port:8080, });
  pushstream.onmessage = function(data) {
    console.log('Received message:', data);
    if (data === 'now') {
      window.location.reload();
    }
  };
  pushstream.addChannel('refreshme');
  pushstream.connect();
</script>

<script type='text/javascript' src='/MathJax/MathJax.js?config=TeX-AMS-MML_HTMLorMML'></script>

<script type="text/x-mathjax-config">
MathJax.Hub.Config({
  TeX : {
    Macros : {
      vec : [ "{\\bf #1}", 1 ],
      norm : [ "\\left\\| #1 \\right\\|", 1 ],
      expp : [ "\\exp\\left(#1\\right)", 1 ],
    },
    equationNumbers : {autoNumber : "all"}
  },
  tex2jax : {inlineMath : [ [ '$', '$' ], [ '\\(', '\\)' ] ]}
});
</script>
</head>

<article>
<decoded-root><h1>How to use the FFT to make, and take apart, sinusoidal data</h1><p class="subtitle">Ahmed Fasih</p><section><h2>Data model. Or, a mathematical description of the data I've got.</h2><p>Suppose I have a radar-like device where, when I push a button, it broadcasts a brief radio signal, listens for echoes from reflectors, does some signal processing magic called correlation, and saves a list of numbers to disk. Suppose further that the <mathjax>$N$</mathjax> saved numbers are complex-valued and have this mathematical form:</p><p><mathjax>$$\vec{y} = \sum_{i=1}^{N_{t}} a_i \expp{-j 2 \pi \vec{f} t_i} + \text{noise}.
\label{eqn:forwardModel}$$</mathjax></p><p>That is, the <mathjax>$N \times 1$</mathjax> data vector <mathjax>$\vec{y}$</mathjax> contains one complex exponential<label for="complex-exp" class="margin-toggle sidenote-number"></label><input id="complex-exp" class="margin-toggle" type="checkbox" /><span class="sidenote">A complex exponential is a sum of two special sinusoids: <mathjax>$\expp{j\theta} = \cos(\theta) + j \sin(\theta)$</mathjax>, where <mathjax>$j = \sqrt{-1}$</mathjax>.</span> for each reflector in the scene, plus a little bit of noise. Furthermore, the <mathjax>$i$</mathjax>th exponential has ampltide <mathjax>$a_i$</mathjax>—it’s units don’t really matter—and frequency <mathjax>$t_i$</mathjax>, which happens to be in seconds.</p><p>This is a little strange: shouldn’t frequency be in Hertz? No, because the dimension along which the complex exponential varies is not time, but frequency, and is specified by an <mathjax>$N \times 1$</mathjax> vector of frequencies <mathjax>$\vec{f}$</mathjax>, in Hertz.<label for="bold" class="margin-toggle sidenote-number"></label><input id="bold" class="margin-toggle" type="checkbox" /><span class="sidenote">Bold variables like <mathjax>$\vec{f}$</mathjax> and <mathjax>$\vec{y}$</mathjax> indicate vectors. Also, <mathjax>$\vec{f}^T$</mathjax> indicates the transpose of <mathjax>$\vec{f}$</mathjax>.</span> The <mathjax>$N$</mathjax> numbers in this frequency vector are an evenly-spaced list of frequencies that the RF hardware actually broadcast. Let <mathjax>$\vec{f} = f_0 + [0,\cdots,N-1]^T \delta_f$</mathjax>, where <mathjax>$f_0$</mathjax> is the start frequency and <mathjax>$\delta_f$</mathjax> the spacing between frequency bins—all in Hertz.</p><p>So while the hardware controls part of the expression in <mathjax>$\eqref{eqn:forwardModel}$</mathjax> by pre-specifying <mathjax>$\vec{f}$</mathjax>, the scene and its reflectors show up in those exponentials’ amplitudes and phases. The <mathjax>$i$</mathjax>th exponential’s amplitude <mathjax>$a_i$</mathjax> represents the size of the reflector,<label for="rcs" class="margin-toggle sidenote-number"></label><input id="rcs" class="margin-toggle" type="checkbox" /><span class="sidenote">Jargon: its radar cross section.</span> and its frequency<label for="freq" class="margin-toggle sidenote-number"></label><input id="freq" class="margin-toggle" type="checkbox" /><span class="sidenote">I know I’m casually using “frequency” to describe both the radio waves the antenna broadcast, i.e., <mathjax>$\vec{f}$</mathjax>, as well as the rate of oscillation of my data vector <mathjax>$\vec{y}$</mathjax>, i.e., <mathjax>$t_i$</mathjax>. And that it doesn't help that the units of <mathjax>$t_i$</mathjax> are seconds, since it’s actually a round-trip time. The two are totally different, and I'm hoping the context helps keep the two distinct. ?</span> <mathjax>$t_i$</mathjax> represents the round-trip time between the transmitter antenna and the reflector:</p><p><mathjax>$$t_i = \tfrac{2}{c} \norm{\vec{p}_i - \vec{p}_{TX}},$$</mathjax></p><p>where <mathjax>$c$</mathjax> is the speed of light in meters per second, and <mathjax>$\vec{p}_i$</mathjax> and  <mathjax>$\vec{p}_{TX}$</mathjax> are the 3D positions of the <mathjax>$i$</mathjax>th reflector and the transmitter respectively, in meters. The transmitter-reflector distance is doubled (hence that 2 there) because its a round-trip.<label for="norm" class="margin-toggle sidenote-number"></label><input id="norm" class="margin-toggle" type="checkbox" /><span class="sidenote"><mathjax>$\norm{[x, y, z]^T} = \sqrt{x^2 + y^2 + z^2}$</mathjax>.</span></p><h2>Resolution</h2><p>Having been given these <mathjax>$N$</mathjax> complex numbers, I'd like to see what's actually out there: how many reflectors <mathjax>$N_t$</mathjax> there are, how far away each is, and how big it is (how much energy did it reflect).<label for="one-dim-range" class="margin-toggle sidenote-number"></label><input id="one-dim-range" class="margin-toggle" type="checkbox" /><span class="sidenote">There are plenty of interesting facts about the scene that I can learn from this limited set of data. It doesn't bother me that this one snapshot from this one radar can only tell me <em>radial one-dimensional distance</em> to reflectors, and that if I had multiple snapshots I could measure their radial velocity; or, that if I had multiple radars I could estimate their 2D or even 3D positions.</span></p><p>There's this concept of resolution. Clearly, if two reflectors were separated by the tiniest fraction of a meter, their reflections will arrive at nearly exactly the same time, creating two complex exponentials with nearly-identical frequency. Even in the presence of constructive or destructive interference between those two exponentials, it will be extremely hard to tell that there were two different exponentials, rather than just one.</p><p>People have proved various theorems that together state that you can reliably separate two equal-amplitude complex exponentials <mathjax>$\expp{-j2\pi\vec{f} t_1}$</mathjax> and  <mathjax>$\expp{-j2\pi\vec{f} t_2}$</mathjax> if their delta-frequencies <mathjax>$|t_1 - t_2| \geq \tfrac{1}{N \delta_f}$</mathjax>. In words, the minimum reasonable separation in oscillation rates is inversely proportional to how many samples of data you have—in appropriately consistent units. The more data I can collect—in my radar example, the larger the bandwidth the antenna broadcasts—the better I can detect closely-spaced targets.</p></section></decoded-root>
</article>